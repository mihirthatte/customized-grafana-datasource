{"version":3,"sources":["../src/query_ctrl.js"],"names":["QueryCtrl","GenericDatasourceQueryCtrl","$scope","$injector","uiSegmentSrv","scope","target","series","type","condition","groupby_field","metric_array","metricValues_array","target_alias","whereClauseGroup","inlineGroupOperator","outerGroupOperator","wName","index","push","console","log","a","datasource","findOperator","metricFindColumns","then","transformToSegments","metricFindValues","$$state","metricFindTables","parentIndex","findWhereFields","rawQuery","templateUrl"],"mappings":"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","file":"query_ctrl.js","sourcesContent":["import {QueryCtrl} from 'app/plugins/sdk';\nimport './css/query-editor.css!'\n\nexport class GenericDatasourceQueryCtrl extends QueryCtrl {\n\n  constructor($scope, $injector, uiSegmentSrv)  {\n    super($scope, $injector);\n\n    this.scope = $scope;\n    this.uiSegmentSrv = uiSegmentSrv;\n    this.target.series = this.target.series||'select table';\n    this.target.type = this.target.type || 'timeserie';\n    this.target.condition = this.target.condition||[];\n    this.target.groupby_field = this.target.groupby_field || ' '; \n    //this.target.segments = this.target.segments||[];\n    //this.target.valueSegments =this.target.valueSegments||[];\n    this.target.metric_array = this.target.metric_array||['Select Metric'];\n    this.target.metricValues_array = this.target.metricValues_array ||['Select Metric Value'];\n    this.target.target_alias = this.target.target_alias||\"\";\n    this.target.whereClauseGroup = this.target.whereClauseGroup||[[{'left':'Select Metric','op':'','right':'Insert Target'}]];\n    this.target.inlineGroupOperator = this.target.inlineGroupOperator||[['']];\n    this.target.outerGroupOperator = this.target.outerGroupOperator || [''];\n    this.target.wName = [\"Aida\", \"Aidan\", \"Alla\", \"Allen\", \"Beverly\", \"Bea\", \"Caleb\",\"Catherine\",\"false\"];\n  }\n\n  addWhereClause(index){\n\t\tthis.target.whereClauseGroup[index].push({'left':'Select Metric','op':'=','right':'Insert Target'});\n                console.log(this.target.metricValues_array);\n  \t}\n  addWhereClauseGroup(){\n                this.target.whereClauseGroup.push([{'left':'Select Metric','op':'','right':'Insert Target'}]);\n\t\tthis.target.inlineGroupOperator.push(['']);\n                console.log(this.target.metricValues_array);\n        }\n\n    getOperator(){              \n       var a = this.datasource.findOperator();\n\treturn a;\n\t//.then(this.uiSegmentSrv.transformToSegments(false));\n\t\n\t}\t\n  addSegments(){\n\t\tthis.target.metric_array.push('Select Metric');\n\t\tconsole.log(this.target.metric_array);\n\t}\n\n  addValueSegments(){\n                this.target.metricValues_array.push('Select Metric Value');\n                console.log(this.target.metricValues_array);\n        }\n  getColumns() {\n\tconsole.log(\"I am in get Columns\");\n\tconsole.log(this.target);\n    return this.datasource.metricFindColumns(this.target)\n      .then(this.uiSegmentSrv.transformToSegments(false));\n  }\n\n  getMetricValues() {\n        console.log(\"I am in get Metric Values\");\n        console.log(this.target);\n    var a = this.datasource.metricFindValues(this.target);\n\tconsole.log(a.$$state);\n\treturn a;\n      //.then(this.uiSegmentSrv.transformToSegments(false));\n       }\n\n\n\n getTableNames() {\n        console.log(\"I am in get Table Names\");\n        console.log(this.target);\n    return  this.datasource.metricFindTables(this.target)\n      .then(this.uiSegmentSrv.transformToSegments(false));\n        }\n\n getWhereFields(parentIndex, index){\n\tconsole.log(\"I am in get Table Names\");\n        console.log(this.target);\n    \treturn this.datasource.findWhereFields(this.target,parentIndex, index)\n      .then(this.uiSegmentSrv.transformToSegments(false));\n        }\n\n myFunc(){\n\tconsole.log(\"I am in my Func\");\n        console.log(this.target);\n\t}\n\n  toggleEditorMode() {\n    this.target.rawQuery = !this.target.rawQuery;\n  }\n\n\n onChangeInternal() {\n\tthis.target.metric_array = ['Select Metric'];\n        this.target.metricValues_array = ['Select Matric Value'];\n       console.log(this.target);\n     }\n\n\n\n \n}\n\nGenericDatasourceQueryCtrl.templateUrl = 'partials/query.editor.html';\n\n"]}